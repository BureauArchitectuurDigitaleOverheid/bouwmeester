---
# ExternalSecret definition for use with External Secrets Operator.
# This pulls secrets from the cluster's configured secret store (e.g. Azure Key Vault,
# HashiCorp Vault) and creates a Kubernetes Secret named "bouwmeester-secrets".
#
# If your cluster does not have External Secrets Operator, replace this with a
# SealedSecret or a plain Secret (not recommended for production).
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: bouwmeester-secrets
  namespace: bouwmeester
  labels:
    app.kubernetes.io/part-of: bouwmeester
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: cluster-secret-store
    kind: ClusterSecretStore
  target:
    name: bouwmeester-secrets
    creationPolicy: Owner
  data:
    - secretKey: DATABASE_URL
      remoteRef:
        key: bouwmeester-database-url
    - secretKey: OIDC_CLIENT_SECRET
      remoteRef:
        key: bouwmeester-oidc-client-secret
